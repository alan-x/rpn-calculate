!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var T=t();for(var E in T)("object"==typeof exports?exports:e)[E]=T[E]}}(window,function(){return function(e){var t={};function T(E){if(t[E])return t[E].exports;var n=t[E]={i:E,l:!1,exports:{}};return e[E].call(n.exports,n,n.exports,T),n.l=!0,n.exports}return T.m=e,T.c=t,T.d=function(e,t,E){T.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:E})},T.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},T.t=function(e,t){if(1&t&&(e=T(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var E=Object.create(null);if(T.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)T.d(E,n,function(t){return e[t]}.bind(null,n));return E},T.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return T.d(t,"a",t),t},T.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},T.p="",T(T.s=5)}([function(e,t){type={TYPE_NUMBER:"TYPE_NUMBER",TYPE_LEFT_BRACKET:"TYPE_LEFT_BRACKET",TYPE_RIGHT_BRACKET:"TYPE_RIGHT_BRACKET",TYPE_OPERATION_ADD:"TYPE_OPERATION_ADD",TYPE_OPERATION_SUB:"TYPE_OPERATION_SUB",TYPE_OPERATION_MUL:"TYPE_OPERATION_MUL",TYPE_OPERATION_DIV:"TYPE_OPERATION_DIV"},e.exports=type},function(e,t,T){const E=T(0);function n(e,t,T){switch(T.type){case E.TYPE_OPERATION_ADD:return e+t;case E.TYPE_OPERATION_SUB:return e-t;case E.TYPE_OPERATION_MUL:return e*t;case E.TYPE_OPERATION_DIV:return e/t;default:throw`unkonw operation: ${T.type}:${T.value}`}}e.exports=function(e){let t;e=e.reverse();let T=[];for(;e.length;)switch((t=e.pop()).type){case E.TYPE_NUMBER:T.push(t.value);break;case E.TYPE_OPERATION_ADD:case E.TYPE_OPERATION_SUB:case E.TYPE_OPERATION_MUL:case E.TYPE_OPERATION_DIV:{let e=T.pop(),E=T.pop();T.push(n(E,e,t));break}default:throw`error: unknow type ${t.value}`}return T[0]}},function(e,t,T){const E=T(0);e.exports=function(e){let t;e=e.reverse();let T=[],n=[];for(;e.length;)switch((t=e.pop()).type){case E.TYPE_NUMBER:T.push(t);break;case E.TYPE_OPERATION_ADD:for(;n.length;){let e=n.pop();if(e.type===E.TYPE_LEFT_BRACKET){n.push(e);break}T.push(e)}n.push(t);break;case E.TYPE_OPERATION_SUB:for(;n.length;){let e=n.pop();T.push(e)}n.push(t);break;case E.TYPE_OPERATION_MUL:case E.TYPE_OPERATION_DIV:case E.TYPE_LEFT_BRACKET:n.push(t);break;case E.TYPE_RIGHT_BRACKET:for(var r=n.pop();r.type!==E.TYPE_LEFT_BRACKET;)T.push(r),r=n.pop();break;default:throw`error type: ${t.type}`}for(;n.length;)T.push(n.pop());return T}},function(e,t,T){const E=T(0);let n={[E.TYPE_NUMBER]:[E.TYPE_OPERATION_ADD,E.TYPE_OPERATION_SUB,E.TYPE_OPERATION_MUL,E.TYPE_OPERATION_DIV,E.TYPE_RIGHT_BRACKET],[E.TYPE_OPERATION_ADD]:[E.TYPE_NUMBER,E.TYPE_LEFT_BRACKET],[E.TYPE_OPERATION_SUB]:[E.TYPE_NUMBER,E.TYPE_LEFT_BRACKET],[E.TYPE_OPERATION_MUL]:[E.TYPE_NUMBER,E.TYPE_LEFT_BRACKET],[E.TYPE_OPERATION_DIV]:[E.TYPE_NUMBER,E.TYPE_LEFT_BRACKET],[E.TYPE_LEFT_BRACKET]:[E.TYPE_NUMBER,E.TYPE_LEFT_BRACKET],[E.TYPE_RIGHT_BRACKET]:[E.TYPE_OPERATION_ADD,E.TYPE_OPERATION_SUB,E.TYPE_OPERATION_MUL,E.TYPE_OPERATION_DIV,E.TYPE_RIGHT_BRACKET]};e.exports=function(e,t=!1){let T=0,r=(e=e.reverse()).pop();if(![E.TYPE_NUMBER,E.TYPE_LEFT_BRACKET].includes(r.type))throw`syntax error: could not begin with ${r.value}`;for(r.type===E.TYPE_LEFT_BRACKET&&T++;e.length;){let t=e.pop();if(!n[r.type].includes(t.type))throw`syntax error: ${r.value} -> ${t.value}`;t.type===E.TYPE_LEFT_BRACKET&&T++,t.type===E.TYPE_RIGHT_BRACKET&&T--,r=t}if(T<0)throw"syntax error: toooooo much ) -> )";if(t&&0!==T)throw"syntax error: lack of ( or )";return!0}},function(e,t,T){const E=T(0);e.exports=function(e){let t,T=e.split("").reverse(),n=[];for(;T.length;){if((t=T.pop()).match(/[0-9]/)){let e=T.pop();for(;void 0!==e&&e.match(/[0-9]/);)t+=e,e=T.pop();n.push({type:E.TYPE_NUMBER,value:+t}),t=e}if(void 0===t)break;switch(t){case"(":n.push({type:E.TYPE_LEFT_BRACKET,value:"("});continue;case")":n.push({type:E.TYPE_RIGHT_BRACKET,value:")"});continue;case"+":n.push({type:E.TYPE_OPERATION_ADD,value:"+"});continue;case"-":n.push({type:E.TYPE_OPERATION_SUB,value:"-"});continue;case"*":n.push({type:E.TYPE_OPERATION_MUL,value:"*"});continue;case"/":n.push({type:E.TYPE_OPERATION_DIV,value:"/"});continue;default:throw`error input: ${t}`}}return n}},function(e,t,T){const E=T(4),n=T(3),r=T(2),o=T(1);function _(e){return n(E(e))}window.tokenize=E,window.syntaxAnalyze=n,window.syntaxAnalyzeText=_,window.parse=r,window.calculate=o,e.exports={tokenize:E,syntaxAnalyze:n,syntaxAnalyzeText:_,parse:r,parseText:function(e){return n(E(e)),r(E(e))},calculate:o,calculateText:function(e){let t=E(e);return n(t),o(r(E(e)))}}}])});